# H100 Dockerized Remote Executor
# Forces ALL operations to run inside H100 container with CUDA 13.0.2

name: H100 Dockerized Remote

executor:
  type: ssh
  host: 154.57.34.90
  port: 25754
  user: root
  shell: /bin/bash
  workingDirectory: /workspace/BlackwellSparseK
  
  # Force Docker execution
  docker:
    image: nvidia/cuda:13.0.2-devel-ubuntu22.04
    volumes:
      - /workspace:/workspace
    gpu: all
    runtime: nvidia
  
  # Environment variables
  env:
    CUDA_HOME: /usr/local/cuda-13.0
    PATH: /usr/local/cuda-13.0/bin:$PATH
    LD_LIBRARY_PATH: /usr/local/cuda-13.0/lib64:$LD_LIBRARY_PATH
    CUTLASS_HOME: /opt/cutlass
    CPATH: /opt/cutlass/include:$CPATH

description: >
  Executes all builds and benchmarks inside the H100 Docker container.
  Ensures CUDA 13.0.2 + CUTLASS 4.3.0 environment.
  NEVER falls back to local macOS execution.

